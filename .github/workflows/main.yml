name: ğŸš€ HlavnÃ­ workflow â€” Oprava a nasazenÃ­ webu

on:
  push:
    branches: [ main ]
  workflow_dispatch:

permissions:
  contents: write
  pages: write
  id-token: write

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ“¥ Checkout kÃ³du
        uses: actions/checkout@v4

      - name: ğŸ NastavenÃ­ Pythonu
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'

      - name: ğŸ§° Instalace zÃ¡vislostÃ­
        run: |
          pip install requests

      - name: ğŸ¤– SpuÅ¡tÄ›nÃ­ Fix-It Bota
        run: |
          python Fix-it-bot.py

      - name: ğŸ’¾ Commit a push oprav (pokud nÄ›jakÃ© jsou)
        run: |
          git config --global user.name "FixBot"
          git config --global user.email "fixbot@users.noreply.github.com"
          git add .
          if ! git diff --cached --quiet; then
            git commit -m "ğŸ¤– Auto-fix: vÅ¡echno opraveno"
            git push
            echo "âœ… ZmÄ›ny byly commitnuty a pushnuty."
          else
            echo "â„¹ï¸  Å½Ã¡dnÃ© zmÄ›ny k commitnutÃ­."
          fi

      - name: âš™ï¸ Konfigurace GitHub Pages
        uses: actions/configure-pages@v3

      - name: ğŸ—ƒï¸ PÅ™Ã­prava artifactu pro Pages
        uses: actions/upload-pages-artifact@v2   # âœ… JedinÃ¡ sprÃ¡vnÃ¡ akce pro Pages
        with:
          path: './'

      - name: ğŸŒ NasazenÃ­ na GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v3
